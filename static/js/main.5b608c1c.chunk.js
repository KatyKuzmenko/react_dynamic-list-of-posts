(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(4),c=s.n(n),a=s(2),o=s(1),i=(s(10),s(11),s(12),"https://mate.academy/students-api");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(i+e,t).then((function(e){return e.json()}))}var l=s(0),u=function(e){var t=e.selectedUserId,s=e.selectedPostId,n=e.setselectedPostId,c=Object(o.useState)([]),i=Object(a.a)(c,2),u=i[0],d=i[1],j=Object(o.useState)(!1),m=Object(a.a)(j,2),b=m[0],O=m[1];return Object(o.useEffect)((function(){var e;O(!0),(e=t,r(e?"/posts?userId=".concat(e):"/posts")).then((function(e){d(e),O(!1)}))}),[t]),Object(l.jsxs)("div",{className:"PostsList",children:[Object(l.jsx)("h2",{children:"Posts:"}),b?"LOADING...":Object(l.jsx)("ul",{className:"PostsList__list",children:u.map((function(e){return Object(l.jsxs)("li",{className:"PostsList__item",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"[User #".concat(e.userId,"]: ")}),e.title]}),Object(l.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){s===e.id&&n(e.id),n(e.id)},children:s!==e.id?"OPEN":"CLOSE"})]},e.id)}))})]})},d=s(5);function j(e){return r(e?"/comments?postId=".concat(e):"/posts")}s(14);var m=function(e){var t=e.postId,s=e.addNewComment,n=Object(o.useState)(""),c=Object(a.a)(n,2),i=c[0],r=c[1],u=Object(o.useState)(""),d=Object(a.a)(u,2),j=d[0],m=d[1],b=Object(o.useState)(""),O=Object(a.a)(b,2),h=O[0],p=O[1];return Object(l.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),s({name:i,email:j,body:h,postId:t}),r(""),m(""),p("")},children:[Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",required:!0,value:i,onChange:function(e){return r(e.target.value)}})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",required:!0,value:j,onChange:function(e){return m(e.target.value)}})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",required:!0,value:h,onChange:function(e){return p(e.target.value)}})}),Object(l.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},b=(s(15),function(e){var t=e.selectedPostId,s=Object(o.useState)(null),n=Object(a.a)(s,2),c=n[0],i=n[1],u=Object(o.useState)([]),b=Object(a.a)(u,2),O=b[0],h=b[1],p=Object(o.useState)(!0),f=Object(a.a)(p,2),x=f[0],_=f[1];Object(o.useEffect)((function(){var e;(e=t,r(e?"/posts/".concat(e):"/posts")).then((function(e){return i(e)})),j(t).then((function(e){return h(e)}))}),[t]);var v=function(e){var s;(s=e,r("/comments/".concat(s),{method:"DELETE"})).then((function(){j(t).then((function(e){return h(e)}))}))};return Object(l.jsxs)("div",{className:"PostDetails",children:[Object(l.jsx)("h2",{children:"Post details:"}),Object(l.jsx)("section",{className:"PostDetails__post",children:Object(l.jsx)("p",{children:null===c||void 0===c?void 0:c.body})}),Object(l.jsxs)("section",{className:"PostDetails__comments",children:[O.length>0&&Object(l.jsx)("button",{type:"button",className:"button",onClick:function(){_(!x)},children:x?"Hide comments":"Show comments"}),Object(l.jsx)("ul",{className:"PostDetails__list",children:x&&Object(l.jsx)(l.Fragment,{children:O.map((function(e){return Object(l.jsxs)("li",{className:"PostDetails__list-item",children:[Object(l.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return v(e.id)},children:"X"}),Object(l.jsx)("p",{children:e.body})]},e.id)}))})})]}),Object(l.jsx)("section",{children:Object(l.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(l.jsx)(m,{postId:t,addNewComment:function(e){(function(e){return r("/comments",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(Object(d.a)({},e))})})(e).then((function(){j(t).then((function(e){return h(e)}))}))}})})})]})}),O=function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),s=t[0],n=t[1],c=Object(o.useState)(0),i=Object(a.a)(c,2),d=i[0],j=i[1],m=Object(o.useState)(0),O=Object(a.a)(m,2),h=O[0],p=O[1];return Object(o.useEffect)((function(){r("/users").then((function(e){return n(e)}))}),[]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App__header",children:Object(l.jsxs)("label",{htmlFor:"select",children:["Select a user: \xa0",Object(l.jsxs)("select",{className:"App__user-selector",name:"select",onChange:function(e){return p(+e.target.value)},children:[Object(l.jsx)("option",{value:"0",children:"All users"}),s.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(l.jsxs)("main",{className:"App__main",children:[Object(l.jsx)("div",{className:"App__sidebar",children:Object(l.jsx)(u,{selectedUserId:h,selectedPostId:d,setselectedPostId:j})}),!!d&&Object(l.jsx)("div",{className:"App__content",children:Object(l.jsx)(b,{selectedPostId:d})})]})]})};c.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.5b608c1c.chunk.js.map